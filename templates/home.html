{% extends "base.html" %}
{% block title %}–û–≥–æ–Ω—å –ñ–∏–∑–Ω–∏ ‚Äî —Ç–æ–≤–∞—Ä—ã –¥–ª—è —É—é—Ç–∞{% endblock %}

{% block content %}
<style>
/* ========= –°–ö–û–£–ü: —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å–∞–π—Ç ========= */
.mp-home { --brand:#ff6a00; --text:#1f2937; --muted:#6b7280; --line:#e5e7eb; --card:#fff; }
.mp-home, .mp-home * { font-weight: 400; }


.mp-home .wrap { max-width: 1200px; margin: 0 auto; padding: 18px 14px 48px; }

/* HERO */
.mp-home .hero {
  border: 1px solid var(--line);
  border-radius: 18px;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.06);
  overflow: hidden;
}
.mp-home .hero-inner{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: 18px;
  padding: 22px;
  align-items:center;
}
.mp-home .hero h1{
  margin:0;
  font-weight: 600;          /* –±—ã–ª–æ 900 */
  letter-spacing: -.3px;
  font-size: 34px;
  color: var(--text);
  line-height: 1.12;
}
.mp-home .hero h1 .accent{ color: var(--brand); font-weight: 600; }
.mp-home .hero p{
  margin: 10px 0 14px;
  color: var(--muted);
  font-size: 15px;
  max-width: 560px;
}

/* Search */
.mp-home .search {
  display:flex;
  gap: 10px;
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 8px;
  background: #fff;
  max-width: 720px;
}
.mp-home .search input{
  border: 0;
  outline: 0;
  flex: 1;
  padding: 8px 10px;
  font-size: 14px;
  min-width: 0;
}
.mp-home .search button{
  border: 0;
  background: var(--brand);
  color: #fff;
  border-radius: 999px;
  padding: 9px 12px;
  font-weight: 500;          /* –±—ã–ª–æ 800 */
  cursor: pointer;
  transition:.15s;
}
.mp-home .search button:hover{ filter: brightness(.96); transform: translateY(-1px); }

/* Actions */
.mp-home .hero-actions{ margin-top: 10px; display:flex; gap:10px; flex-wrap:wrap; }
.mp-home .hero-actions a{
  text-decoration:none;
  font-weight: 500;          /* –±—ã–ª–æ 800 */
  border-radius: 999px;
  padding: 9px 12px;
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.mp-home .btn-solid{
  background: var(--brand);
  color:#fff;
  box-shadow: 0 10px 20px rgba(255,106,0,.18);
}
.mp-home .btn-solid:hover{ filter: brightness(.97); transform: translateY(-1px); }
.mp-home .btn-soft{
  background:#fff;
  color: var(--text);
  border: 1px solid var(--line);
}
.mp-home .btn-soft:hover{ transform: translateY(-1px); border-color:#d1d5db; }

/* Sections */
.mp-home .section { margin-top: 22px; }
.mp-home .section-title{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap: 10px;
  margin: 0 0 12px;
}
.mp-home .section-title h2{
  margin:0;
  font-size: 20px;
  font-weight: 600;          /* –±—ã–ª–æ 900 */
  color: var(--text);
  letter-spacing: -.2px;
}
.mp-home .section-title .hint{ color: var(--muted); font-size: 13px; }

/* Cards grid */
.mp-home .grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px;
}

.mp-home .p-card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 16px;
  overflow:hidden;
  transition:.18s;
  display:flex;
  flex-direction:column;
  min-height: 350px;
}
.mp-home .p-card:hover{
  transform: translateY(-3px);
  box-shadow: 0 14px 30px rgba(0,0,0,.08);
  border-color:#d1d5db;
}
.mp-home .p-media{
  position:relative;
  height: 185px;
  background: #f8fafc;
  display:flex;
  align-items:center;
  justify-content:center;
}
.mp-home .p-media img{
  width:100%;
  height:100%;
  object-fit: contain;
}
.mp-home .badge-hit{
  position:absolute;
  top: 12px; left: 12px;
  background: #fff;
  border: 1px solid rgba(255,106,0,.25);
  color: var(--brand);
  font-weight: 500;         /* –±—ã–ª–æ 900 */
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
}

.mp-home .p-body{
  padding: 12px 14px 14px;
  display:flex;
  flex-direction:column;
  gap: 8px;
  flex:1;
}
.mp-home .p-name{
  font-weight: 500;         /* –±—ã–ª–æ 800 */
  font-size: 14px;
  color: var(--text);
  line-height: 1.25;
  min-height: 36px;
}
.mp-home .p-meta{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  color: var(--muted);
  font-size: 12px;
}
.mp-home .p-price{
  font-size: 18px;
  font-weight: 600;         /* –±—ã–ª–æ 950 */
  color: var(--text);
  letter-spacing: -.2px;
}
.mp-home .p-actions{
  margin-top:auto;
  display:flex;
  gap: 10px;
  align-items:center;
}

.mp-home .btn-detail{
  flex:1;
  border: 1px solid var(--line);
  background:#fff;
  border-radius: 999px;
  padding: 9px 12px;
  font-weight: 500;         /* –±—ã–ª–æ 900 */
  text-decoration:none;
  color: var(--text);
  text-align:center;
  transition:.15s;
}
.mp-home .btn-detail:hover{ transform: translateY(-1px); border-color:#d1d5db; }

.mp-home .btn-cart{
  width: 44px; height: 40px; /* —á—É—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ */
  border:0;
  border-radius: 999px;
  background: var(--brand);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:.15s;
}
.mp-home .btn-cart:hover{ transform: translateY(-1px); filter: brightness(.96); }

/* Advantages */
.mp-home .advantages{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 14px;
}
.mp-home .adv{
  background:#fff;
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 14px;
  display:flex;
  gap: 12px;
  align-items:flex-start;
}
.mp-home .adv-ico{
  width: 44px; height: 44px;
  border-radius: 16px;
  background: rgba(255,106,0,.10);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 20px;
}
.mp-home .adv h3{ margin:0; font-size: 14px; font-weight: 600; color: var(--text); } /* –±—ã–ª–æ 950 */
.mp-home .adv p{ margin:4px 0 0; font-size: 13px; color: var(--muted); }

@media (max-width: 900px){
  .mp-home .hero-inner{ grid-template-columns: 1fr; }
  .mp-home .hero h1{ font-size: 30px; }
}
@media (max-width: 520px){
  .mp-home .search{ flex-direction: column; border-radius: 16px; }
  .mp-home .search button{ width:100%; }
}



/* FIX Font Awesome inside mp-home (–ø–æ—Å–ª–µ reset'–∞) */
.mp-home i.fa-solid,
.mp-home i.fas {
  font-weight: 900 !important;
}

</style>


<div class="mp-home">
  <div class="wrap">

    <!-- HERO -->
    <section class="hero">
      <div class="hero-inner">
        <div>
          <h1>–¢–æ–≤–∞—Ä—ã –¥–ª—è <span class="accent">—É—é—Ç–∞</span> –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã</h1>
          <p>–°–≤–µ—á–∏, –¥–µ–∫–æ—Ä –∏ –ø–æ–¥–∞—Ä–∫–∏ ‚Äî –≤—Å—ë, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–æ–º —Ç—ë–ø–ª—ã–º. –ë—ã—Å—Ç—Ä–æ –Ω–∞–π–¥–∏ –Ω—É–∂–Ω–æ–µ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</p>

          <form class="search" method="get" action="{% url 'catalog:product_list' %}">
            {% if current_category %}
              <input type="hidden" name="category" value="{{ current_category.slug }}">
            {% endif %}
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫: —Å–≤–µ—á–∏, –¥–∏—Ñ—Ñ—É–∑–æ—Ä—ã, –¥–µ–∫–æ—Ä‚Ä¶" value="{{ request.GET.q|default_if_none:'' }}">
            <button type="submit">–ù–∞–π—Ç–∏</button>
          </form>

          <div class="hero-actions">
            <a href="/catalog/" class="btn-solid">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ ‚Üí</a>
            {% if current_category or request.GET.q %}
              <a href="{% url 'catalog:product_list' %}" class="btn-soft">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
            {% else %}
              <a href="#hits" class="btn-soft">–°–º–æ—Ç—Ä–µ—Ç—å —Ö–∏—Ç—ã</a>
            {% endif %}
          </div>
        </div>

        
      </div>
    </section>

    

    <!-- –•–ò–¢–´ -->
    <section class="section" id="hits">
      <div class="section-title">
        <h2>–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</h2>
        <div class="hint"><a href="/catalog/" style="color:#6b7280;text-decoration:none;">–í—Å–µ —Ç–æ–≤–∞—Ä—ã ‚Üí</a></div>
      </div>

      <div class="grid">
        {% for product in featured_products %}
          <div class="p-card">
            <div class="p-media">
              <span class="badge-hit">–•–∏—Ç</span>
              {% if product.images.first %}
                <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
              {% else %}
                <img src="/static/img/no-image.png" alt="–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
              {% endif %}
            </div>

            <div class="p-body">
              <div class="p-name">{{ product.name }}</div>

              <div class="p-meta">
  {% if product.rating_count %}
    <div>‚òÖ {{ product.rating_avg|floatformat:1 }} ({{ product.rating_count }})</div>
  {% endif %}
  <div>–í –Ω–∞–ª–∏—á–∏–∏</div>
</div>

              <div class="p-price">{{ product.price }} ‚ÇΩ</div>

              <div class="p-actions">
                <a href="{% url 'catalog:product_detail' product.slug %}" class="btn-detail">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>

                <form method="post" action="{% url 'orders:cart_add' product.id %}" class="js-add-to-cart">
                  {% csrf_token %}
                  <button class="btn-cart" aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É">
  <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M6 6h15l-2 8H8L6 6Z" />
    <path d="M6 6 5 3H2" />
    <circle cx="9" cy="20" r="1.5" />
    <circle cx="18" cy="20" r="1.5" />
  </svg>
</button>
                </form>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </section>

    <!-- –ü–õ–Æ–°–´ -->
    <section class="section">
      <div class="section-title">
        <h2>–ü–æ—á–µ–º—É –º—ã</h2>
        
      </div>

      <div class="advantages">
        <div class="adv">
          <div class="adv-ico">‚≠ê</div>
          <div>
            <h3>–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ</h3>
            <p>–û—Ç–±–æ—Ä–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞.</p>
          </div>
        </div>
        <div class="adv">
          <div class="adv-ico">üöö</div>
          <div>
            <h3>–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h3>
            <p>–°–æ–±–∏—Ä–∞–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.</p>
          </div>
        </div>
        <div class="adv">
          <div class="adv-ico">üéÅ</div>
          <div>
            <h3>–ò–¥–µ–∏ –¥–ª—è –ø–æ–¥–∞—Ä–∫–æ–≤</h3>
            <p>–ü–æ–¥–±–æ—Ä–∫–∏ –ø–æ–¥ –ø–æ–≤–æ–¥ –∏ –≥–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã.</p>
          </div>
        </div>
      </div>
    </section>

  </div>
</div>
{% endblock %}
