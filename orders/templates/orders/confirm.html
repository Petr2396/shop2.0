{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5" style="max-width: 500px;">
    <h3 class="mb-4 text-center">Подтверждение заказа</h3>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <!-- Телефон -->
        <div class="mb-3">
            <label class="form-label">Номер телефона</label>
            <input
                type="tel"
                name="phone"
                class="form-control"
                placeholder="+7 (999) 123-45-67"
                required
                value="{{ phone|default:'' }}"
            >
        </div>

        {% if show_password %}
            <!-- Пароль -->
            <div class="mb-3">
                <label class="form-label">
                    {% if user_exists %}
                        Введите пароль
                    {% else %}
                        Придумайте пароль
                    {% endif %}
                </label>
                <input
                    type="password"
                    name="password"
                    class="form-control"
                    required
                >
            </div>
        {% endif %}

        <button type="submit" class="btn btn-primary w-100">
            {% if show_password %}
                {% if user_exists %}
                    Войти и оплатить
                {% else %}
                    Создать профиль и оплатить
                {% endif %}
            {% else %}
                Продолжить
            {% endif %}
        </button>
    </form>

    <div class="mt-3 text-muted text-center" style="font-size: 14px;">
        Мы используем номер телефона только для оформления заказа
    </div>
</div>
{% endblock %}
